<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>UNDETALLIS — Mensajes Secuenciales</title>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3GFTY2SWSM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3GFTY2SWSM');
</script>

<!-- ===== ESTILOS ===== -->
<style>
    body {
        margin: 0;
        overflow: hidden;
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        background: black;
        font-family: "Arial", sans-serif;
    }

    /* Fondo en movimiento */
    #fondo {
        position: fixed;
        top: 0;
        left: 0;
        height: 110%;
        width: 110%;
        background-image: url('assets/fondo.jpg');
        background-size: cover;
        background-position: center;
        animation: wiggle 1s infinite ease-in-out alternate;
        filter: blur(6px) brightness(0.6);
        z-index: -2;
    }

    @keyframes wiggle {
        0%   { transform: translate(-1.5px, -1.5px) scale(1.015); }
        25%  { transform: translate(1.5px, -1px) scale(1.01); }
        50%  { transform: translate(-1px, 1.5px) scale(1.015); }
        75%  { transform: translate(1px, 1px) scale(1.01); }
        100% { transform: translate(-1.5px, 1px) scale(1.015); }
    }

    /* ===== CONTENEDOR DE VIDRIO ===== */
    #fraseBox {
        position: relative;
        max-width: 85%;
        padding: 35px 50px;
        border-radius: 25px;

        background: rgba(255, 255, 255, 0.07);
        backdrop-filter: blur(30px) saturate(250%) brightness(1.4);
        -webkit-backdrop-filter: blur(30px) saturate(250%) brightness(1.4);

        border: 1.5px solid rgba(255, 255, 255, 0.35);
        box-shadow: 
            inset 0 0 20px rgba(255, 255, 255, 0.2),
            0 0 40px rgba(0,0,0,0.6),
            0 0 60px rgba(0,0,0,0.4);

        color: white;
        font-size: 34px;
        font-weight: 800;
        text-align: center;
        z-index: 10;
        overflow: hidden;

        /* ⭐ NUEVO: VIBRACIÓN LIGERA CONSTANTE ⭐ */
        animation: vibrar 0.25s infinite alternate ease-in-out;
    }

    /* Luces dentro del vidrio */
    #fraseBox::before {
        content: "";
        position: absolute;
        inset: 0;
        background: 
            radial-gradient(circle at 20% 30%, #ff00ff80, transparent 60%),
            radial-gradient(circle at 80% 70%, #00eaff80, transparent 60%),
            radial-gradient(circle at 40% 90%, #ff8a0080, transparent 70%);
        animation: coloresMove 7s infinite alternate ease-in-out;
        filter: blur(50px);
        z-index: -1;
    }

    @keyframes coloresMove {
        0%   { transform: translate(-25px, -25px) scale(1.15); }
        100% { transform: translate(25px, 25px) scale(1.25); }
    }

    /* ⭐ KEYFRAMES DE VIBRACIÓN SUAVE */
    @keyframes vibrar {
        0% { transform: translate(0px, 0px); }
        50% { transform: translate(1px, -1px); }
        100% { transform: translate(-1px, 1px); }
    }

    /* ====================== */
    /* ANIMACIONES DE FRASE   */
    /* ====================== */
    .fadeInUp {
        animation: fadeInUp 0.8s ease forwards;
    }

    .fadeOutDown {
        animation: fadeOutDown 0.8s ease forwards;
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(25px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOutDown {
        from { opacity: 1; transform: translateY(0); }
        to   { opacity: 0; transform: translateY(-25px); }
    }

</style>

<!-- ==== FIREBASE + FRASES ==== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCJ8sSO65rTjF04Dl7VMEuhrLj_Z9yAICs",
      authDomain: "undetallis.firebaseapp.com",
      databaseURL: "https://undetallis-default-rtdb.firebaseio.com",
      projectId: "undetallis",
      storageBucket: "undetallis.firebasestorage.app",
      messagingSenderId: "60709183880",
      appId: "1:60709183880:web:c7751f216ca7f5ad381a3d",
      measurementId: "G-5ZQY4JZBGX"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    /* ===== TODAS LAS FRASES ===== */
    const frases = [
        "¿Quién fue tu último crush?",
        "¿Qué es lo primero que notas en alguien?",
        "¿Cuál ha sido tu mayor metida de pata?",
        "¿Qué es algo que te da pena admitir?",
        "¿Qué es lo más loco que has hecho por amor?",
        "¿Qué es algo que nunca le has contado a nadie?",
        "¿Cuál ha sido tu sueño más raro?",
        "¿Cuál fue tu peor cita?",
        "¿Cuál es tu fantasía más inocente?",
        "Menciona un secreto chiquito",
        ...
        "¿Qué momento de tu vida repetirías?"
    ];

    /* ========== FUNCIÓN CON ANIMACIÓN ========== */
    async function cargarFrase() {
        const fraseBox = document.getElementById("fraseBox");

        fraseBox.classList.remove("fadeInUp");
        fraseBox.classList.add("fadeOutDown");

        await new Promise(resolve => setTimeout(resolve, 600));

        const orderRef = ref(db, "globalOrder");
        const snapshot = await get(orderRef);
        let index = snapshot.exists() ? snapshot.val() : 0;

        fraseBox.innerText = frases[index];

        fraseBox.classList.remove("fadeOutDown");
        fraseBox.classList.add("fadeInUp");

        index = (index + 1) % frases.length;
        set(orderRef, index);
    }

    window.onload = cargarFrase;
</script>
</head>

<body>
    <div id="fondo"></div>
    <div id="fraseBox">Cargando...</div>
</body>
</html>
