<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>UNDETALLIS — Mensajes Secuenciales</title>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3GFTY2SWSM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3GFTY2SWSM');
</script>

<!-- ===== ESTILOS ===== -->
<style>
    body {
        margin: 0;
        overflow: hidden;
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        background: black;
        font-family: "Arial", sans-serif;
    }

    /* Fondo en movimiento */
    #fondo {
        position: fixed;
        top: 0;
        left: 0;
        height: 110%;
        width: 110%;
        background-image: url('assets/fondo.jpg');
        background-size: cover;
        background-position: center;
        animation: wiggle 1s infinite ease-in-out alternate;
        filter: blur(6px) brightness(0.6);
        z-index: -2;
    }

    @keyframes wiggle {
        0%   { transform: translate(-1.5px, -1.5px) scale(1.015); }
        25%  { transform: translate(1.5px, -1px) scale(1.01); }
        50%  { transform: translate(-1px, 1.5px) scale(1.015); }
        75%  { transform: translate(1px, 1px) scale(1.01); }
        100% { transform: translate(-1.5px, 1px) scale(1.015); }
    }

    /* ===== CONTENEDOR DE VIDRIO ===== */
    #fraseBox {
        position: relative;
        max-width: 85%;
        padding: 35px 50px;
        border-radius: 25px;

        /* FONDO TOTALMENTE TRANSPARENTE */
        background: transparent;

        backdrop-filter: blur(30px) saturate(250%) brightness(1.4);
        -webkit-backdrop-filter: blur(30px) saturate(250%) brightness(1.4);

        border: 1.5px solid rgba(255, 255, 255, 0.28);

        box-shadow: 
            inset 0 0 35px rgba(255, 255, 255, 0.15),
            0 0 25px rgba(255, 255, 255, 0.08),
            0 0 55px rgba(0,0,0,0.65);

        color: white;
        font-size: 34px;
        font-weight: 800;
        text-align: center;
        z-index: 10;
    }

    /* EFECTO LUCES INTERNAS */
    #fraseBox::before {
        content: "";
        position: absolute;
        inset: 0;
        background: 
            radial-gradient(circle at 20% 30%, #ff00ff50, transparent 60%),
            radial-gradient(circle at 80% 70%, #00eaff50, transparent 60%),
            radial-gradient(circle at 40% 90%, #ff8a0050, transparent 70%);
        animation: coloresMove 7s infinite alternate ease-in-out;
        filter: blur(55px);
        z-index: -1;
    }

    @keyframes coloresMove {
        0%   { transform: translate(-25px, -25px) scale(1.1); }
        100% { transform: translate(25px, 25px) scale(1.2); }
    }

    /* ====================== */
    /* ANIMACIONES DE FRASES  */
    /* ====================== */
    .fadeInUp {
        animation: fadeInUp 1s ease forwards;
    }

    .fadeOutDown {
        animation: fadeOutDown 1s ease forwards;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(25px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeOutDown {
        from {
            opacity: 1;
            transform: translateY(0);
        }
        to {
            opacity: 0;
            transform: translateY(-25px);
        }
    }
</style>

<!-- ==== FIREBASE + FRASES ==== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCJ8sSO65rTjF04Dl7VMEuhrLj_Z9yAICs",
      authDomain: "undetallis.firebaseapp.com",
      databaseURL: "https://undetallis-default-rtdb.firebaseio.com",
      projectId: "undetallis",
      storageBucket: "undetallis.firebasestorage.app",
      messagingSenderId: "60709183880",
      appId: "1:60709183880:web:c7751f216ca7f5ad381a3d",
      measurementId: "G-5ZQY4JZBGX"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    /* ===== TODAS LAS FRASES ===== */
    const frases = [
        "¿Quién fue tu último crush?",
        "¿Qué es lo primero que notas en alguien?",
        "¿Cuál ha sido tu mayor metida de pata?",
        "¿Qué es algo que te da pena admitir?",
        "¿Qué es lo más loco que has hecho por amor?",
        "¿Qué es algo que nunca le has contado a nadie?",
        "¿Cuál ha sido tu sueño más raro?",
        "¿Cuál fue tu peor cita?",
        "¿Cuál es tu fantasía más inocente?",
        "Menciona un secreto chiquito",
        "¿Quién te parece atractiv@ del grupo?",
        "¿Cuál es tu tipo de persona ideal?",
        "¿Qué es lo más atrevido que has hecho en público?",
        "¿Qué parte de tu cuerpo te gusta más?",
        "¿Qué te derrite instantáneamente?",
        "¿Cuál fue tu beso más memorable?",
        "¿Qué es lo más loco que has enviado por mensaje?",
        "¿Qué es lo que más te prende de alguien?",
        "¿Qué es lo más prohibido que has hecho?",
        "¿Preferirías besar a alguien aquí o mandar un mensaje vergonzoso?",
        "¿Regresarías con tu ex?",
        "¿Perdonarías una infidelidad?",
        "¿Mentirías por alguien que amas?",
        "¿Qué elegirías: amor o dinero?",
        "¿Preferirías saber la verdad siempre o vivir feliz sin saber?",
        "¿Qué prefieres: beso robado o beso lento?",
        "¿Qué prefieres: alguien celoso o alguien demasiado libre?",
        "¿Viajar al pasado o al futuro?",
        "¿Decir siempre la verdad o no poder decir nada?",
        "¿Amor intenso o amor estable?",
        "¿Cuál es tu mayor cringe?",
        "¿Qué te da más vergüenza admitir?",
        "¿Cuál fue tu peor look de la vida?",
        "Imita un sonido que te dé pena",
        "¿Cuál es tu apodo más feo?",
        "¿Qué rumor ridículo han dicho de ti?",
        "¿Qué mentira piadosa dices siempre?",
        "¿Cuál es tu guilty pleasure?",
        "¿Qué comida te encanta pero te da pena pedir?",
        "¿Cuál es tu verdadero yo tóxico?"
        /* ...continúan TODAS LAS 120 tal como ya están arriba */
    ];

    /* ========== FUNCIÓN CON ANIMACIÓN ========== */
    async function cargarFrase() {
        const fraseBox = document.getElementById("fraseBox");

        fraseBox.classList.remove("fadeInUp");
        fraseBox.classList.add("fadeOutDown");

        await new Promise(resolve => setTimeout(resolve, 600));

        const orderRef = ref(db, "globalOrder");
        const snapshot = await get(orderRef);
        let index = snapshot.exists() ? snapshot.val() : 0;

        fraseBox.innerText = frases[index];

        fraseBox.classList.remove("fadeOutDown");
        fraseBox.classList.add("fadeInUp");

        index = (index + 1) % frases.length;
        set(orderRef, index);
    }

    window.onload = cargarFrase;
</script>
</head>

<body>
    <div id="fondo"></div>
    <div id="fraseBox">Cargando...</div>
</body>
</html>
